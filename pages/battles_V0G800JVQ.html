
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>battles_V0G800JVQ</title>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/searchpanes/2.1.2/css/searchPanes.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/select/1.6.2/css/select.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/searchpanes/2.1.2/js/dataTables.searchPanes.min.js"></script>
<script src="https://cdn.datatables.net/select/1.6.2/js/dataTables.select.min.js"></script>
<style>
body { font-family: Arial; margin: 20px; }
h1,h2,h3 { margin-top: 30px; }
table.display td, table.display th { text-align: center; }
.card-img { width: 40px; margin: 2px; vertical-align: middle; }
</style>
</head>
<body>
<h1>Statistiques - battles_V0G800JVQ</h1>

<h2>Stats globales</h2>
<table class="dataframe display compact cell-border">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parties</th>
      <th>Victoires</th>
      <th>% Victoires</th>
      <th>Défaites</th>
      <th>Nuls</th>
      <th>Trophy Change</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Aujourd'hui</th>
      <td>0</td>
      <td>0</td>
      <td>0%</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Mois en cours</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Mois dernier</th>
      <td>0</td>
      <td>0</td>
      <td>0%</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Année en cours</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Total</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
  </tbody>
</table>

<h2>Stats par mode</h2>
<h3>Ladder</h3><table class="dataframe display compact cell-border">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parties</th>
      <th>Victoires</th>
      <th>% Victoires</th>
      <th>Défaites</th>
      <th>Nuls</th>
      <th>Trophy Change</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Aujourd'hui</th>
      <td>0</td>
      <td>0</td>
      <td>0%</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Mois en cours</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Mois dernier</th>
      <td>0</td>
      <td>0</td>
      <td>0%</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Année en cours</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Total</th>
      <td>2</td>
      <td>1</td>
      <td>50.0%</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
  </tbody>
</table><br>


    <h2>Stats par deck</h2>
    <table border=1>
    <thead><tr><th>Deck</th><th>Parties</th><th>Victoires</th><th>Défaites</th><th>Nuls</th><th>% Victoires</th></tr></thead>
    <tbody>
    <tr><td><img src="./../images/Arrows.png" class="card-img"><img src="./../images/Fireball.png" class="card-img"><img src="./../images/Giant.png" class="card-img"><img src="./../images/Inferno Tower.png" class="card-img"><img src="./../images/Knight.png" class="card-img"><img src="./../images/Minions.png" class="card-img"><img src="./../images/Musketeer.png" class="card-img"><img src="./../images/Spear Goblins.png" class="card-img"></td><td>2</td><td>1</td><td>1</td><td>0</td><td>50.0%</td></tr>
    </tbody>
    </table>
    

<h2>Détails des battles</h2>
<div style="margin-bottom:1em;">
<label for="min">Du :</label>
<input type="date" id="min">
<label for="max">Au :</label>
<input type="date" id="max">
</div>

<table class="dataframe display compact cell-border" id="matchTable">
  <thead>
    <tr style="text-align: right;">
      <th>battleTime</th>
      <th>arena</th>
      <th>mode</th>
      <th>player_trophies</th>
      <th>trophy_change</th>
      <th>player_crowns</th>
      <th>opponent_name</th>
      <th>opponent_trophies</th>
      <th>opponent_crowns</th>
      <th>player_elixir_total</th>
      <th>player_card_1</th>
      <th>player_card_2</th>
      <th>player_card_3</th>
      <th>player_card_4</th>
      <th>player_card_5</th>
      <th>player_card_6</th>
      <th>player_card_7</th>
      <th>player_card_8</th>
      <th>opponent_elixir_total</th>
      <th>opponent_card_1</th>
      <th>opponent_card_2</th>
      <th>opponent_card_3</th>
      <th>opponent_card_4</th>
      <th>opponent_card_5</th>
      <th>opponent_card_6</th>
      <th>opponent_card_7</th>
      <th>opponent_card_8</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2025-08-29 12:30:35</td>
      <td>Spell Valley</td>
      <td>Ladder</td>
      <td>1007</td>
      <td>29</td>
      <td>3</td>
      <td>BAGIETA113</td>
      <td>1005</td>
      <td>1</td>
      <td>3.6</td>
      <td>Knight</td>
      <td>Spear Goblins</td>
      <td>Minions</td>
      <td>Arrows</td>
      <td>Fireball</td>
      <td>Giant</td>
      <td>Musketeer</td>
      <td>Inferno Tower</td>
      <td>3.5</td>
      <td>Knight</td>
      <td>Minions</td>
      <td>Wizard</td>
      <td>Arrows</td>
      <td>Fireball</td>
      <td>Battle Ram</td>
      <td>Spear Goblins</td>
      <td>Mini PEKKA</td>
    </tr>
    <tr>
      <td>2025-08-27 12:09:20</td>
      <td>Spell Valley</td>
      <td>Ladder</td>
      <td>1034</td>
      <td>-27</td>
      <td>0</td>
      <td>Angel</td>
      <td>1060</td>
      <td>1</td>
      <td>3.6</td>
      <td>Knight</td>
      <td>Spear Goblins</td>
      <td>Minions</td>
      <td>Arrows</td>
      <td>Fireball</td>
      <td>Giant</td>
      <td>Musketeer</td>
      <td>Inferno Tower</td>
      <td>3.4</td>
      <td>Wizard</td>
      <td>Knight</td>
      <td>Skeletons</td>
      <td>Mini PEKKA</td>
      <td>Battle Ram</td>
      <td>Cannon</td>
      <td>Fireball</td>
      <td>Arrows</td>
    </tr>
  </tbody>
</table>

<script>
// Filtre date
$.fn.dataTable.ext.search.push(function(settings, data, dataIndex){
    var min = $('#min').val();
    var max = $('#max').val();
    var date = data[0];
    if(!date) return true;
    var d = new Date(date);
    if((min=="" && max=="") || (min=="" && d<=new Date(max)) || (new Date(min)<=d && max=="") || (new Date(min)<=d && d<=new Date(max))) return true;
    return false;
});

$(document).ready(function(){
    var table = $('#matchTable').DataTable({
        "pageLength": 25,
        "order": [[0,"desc"]],
        "dom": 'Plfrtip',
        searchPanes: {
            cascadePanes: true,
            viewTotal: true
        },
        columnDefs: [
            { searchPanes: { show: true }, targets: [1,2,5,8] },
            { searchPanes: { show: false }, targets: '_all' },
            { "visible": false, "targets": [10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26] }
        ],
        "rowCallback": function(row, data, index){
            var playerCrowns = parseInt(data[5]);
            var opponentCrowns = parseInt(data[8]);
            if(playerCrowns > opponentCrowns){
                $(row).css('background-color', '#c6efce'); // vert clair
            } else if(playerCrowns < opponentCrowns){
                $(row).css('background-color', '#ffc7ce'); // rouge clair
            } else {
                $(row).css('background-color', ''); // neutre
            }
        }
    });

    $('#min,#max').on('change', function(){ table.draw(); });

    // Afficher elixir et cartes au clic avec images
    $('#matchTable tbody').on('click', 'tr', function(){
        var tr = $(this);
        var row = table.row(tr);
        if(row.child.isShown()){ row.child.hide(); tr.removeClass('shown'); }
        else {
            var data = row.data();
            var html = '<b>Elixir joueur :</b> ' + data[9] + '<br>';
            html += '<b>Cartes Joueur :</b> ';
            for(var i=10;i<18;i++){
                if(data[i]) html += '<img src="./../images/'+data[i]+'.png" class="card-img">';
            }
            html += '<br><b>Elixir adversaire :</b> ' + data[18] + '<br>';
            html += '<b>Cartes Adversaire :</b> ';
            for(var i=19;i<27;i++){
                if(data[i]) html += '<img src="./../images/'+data[i]+'.png" class="card-img">';
            }
            row.child(html).show();
            tr.addClass('shown');
        }
    });
});
</script>
</body>
</html>
